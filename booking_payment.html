<!--Booking payment page.
Displays the selected flight details, passenger and seat information,
price breakdown, and completes the payment for the booking.-->

{% extends 'base.html' %}

{% block title %}Booking Summary - FlyTAU{% endblock %}

{% block body_class %}inner-page{% endblock %}

{% block content %}
<div class="container" style="margin-top: 100px;"> <div class="hero">
        <h2 class="hero-title">Review Your Booking</h2>
    </div>

    <div class="flight-summary">
        <div class="flight-summary-left">
            <div class="flight-number">Flight No. {{ flight.id_flight }}</div>
            <div class="flight-route">{{ flight.origin }} â†’ {{ flight.destination }}</div>
        </div>
        <div class="flight-summary-right">
            <div class="flight-time">
                <span class="label">Departure:</span>
                <span class="value">{{ flight.departure_display }}</span>
            </div>
        </div>
    </div>

    <div class="booking-summary-container">
        <h3 class="section-title">Order Summary</h3>

        <table class="summary-table">
            <thead>
                <tr>
                    <th style="text-align: left;">#</th>
                    <th>Passenger Name</th>
                    <th>Passport Number</th>
                    <th>Seat Details</th>
                    <th class="text-right">Price</th>
                </tr>
            </thead>
            <tbody>
                {% for item in summary_rows %}
                <tr>
                    <td>{{ item.index }}</td>
                    <td class="seat-main-info">{{ item.passenger_name }}</td>
                    <td class="seat-main-info">{{ item.passport }}</td>
                    <td class="seat-main-info">{{ item.seat_display }}</td>
                    <td class="text-right price-col">{{ item.price_fmt }}</td>
                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr class="total-row">
                    <td colspan="2">Total Price</td>
                    <td class="text-right">{{ total_price }}</td>
                </tr>
            </tfoot>
        </table>

       <div class="policy-text-alert">
            <strong style="display: block; margin-bottom: 5px;">Cancellation Policy:</strong>
            Cancellations permitted <strong>up to 36 hours</strong> prior to departure, subject to a 5% fee.
       </div>

        <div style="margin-top: 30px; text-align: right;">
            <form action="{{ url_for('booking_payment') }}" method="POST">
                <button type="submit" class="btn btn-pay-now">
                   Pay Now
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
